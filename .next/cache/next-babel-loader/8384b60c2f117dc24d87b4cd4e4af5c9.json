{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Error from 'next/error';\nimport Layout from '../component/Layout';\nimport Series from '../component/Series';\nimport Clips from '../component/Clips';\nimport PodacastPlayer from '../component/PodcastPlayer';\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"openPodcast\", (event, podcast) => {\n      event.preventDefault();\n      this.setState({\n        openPodcast: podcast\n      });\n    });\n\n    _defineProperty(this, \"closePodcast\", event => {\n      event.preventDefault();\n      this.setState({\n        openPodcast: null\n      });\n    });\n\n    this.state = {\n      openPodcast: null\n    };\n  }\n\n  static async getInitialProps({\n    query,\n    res\n  }) {\n    let idChannel = query.id;\n\n    try {\n      let [reqChannel, reqAudios, reqSeries] = await _Promise.all([fetch(`https://api.audioboom.com/channels/${idChannel}`), fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`), fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`)]);\n\n      if (reqChannel.status >= 400) {\n        res.statusCode = reqChannel.status;\n        return {\n          channel: null,\n          audioClips: null,\n          series: null,\n          statusCode: reqChannel.status\n        };\n      }\n\n      let dataChannel = await reqChannel.json();\n      let channel = dataChannel.body.channel;\n      let dataAudios = await reqAudios.json();\n      let audioClips = dataAudios.body.audio_clips;\n      let dataSeries = await reqSeries.json();\n      let series = dataSeries.body.channels;\n      return {\n        channel,\n        audioClips,\n        series,\n        statusCode: 200\n      };\n    } catch (e) {\n      return {\n        channel: null,\n        audioClips: null,\n        series: null,\n        statusCode: 503\n      };\n    }\n  }\n\n  render() {\n    const {\n      channel,\n      audioClips,\n      series,\n      statusCode\n    } = this.props;\n    const {\n      openPodcast\n    } = this.state;\n\n    if (statusCode !== 200) {\n      return __jsx(Error, {\n        statusCode: statusCode\n      });\n    }\n\n    return __jsx(React.Fragment, null, __jsx(Layout, {\n      title: channel.title\n    }, __jsx(\"div\", {\n      style: {\n        backgroundImage: `url(${channel.urls.logo_image.original}`\n      },\n      className: \"jsx-1980356252\" + \" \" + \"hero\"\n    }), openPodcast && __jsx(\"div\", {\n      className: \"jsx-1980356252\" + \" \" + \"modal\"\n    }, __jsx(PodacastPlayer, {\n      clip: openPodcast,\n      onClose: this.closePodcast\n    })), __jsx(\"h1\", {\n      className: \"jsx-1980356252\"\n    }, \" \", channel.title, \" \"), audioClips.length > 0 && __jsx(Series, {\n      arr: audioClips,\n      onClickPodcast: this.openPodcast\n    }), series.length > 0 && __jsx(Clips, {\n      arr: series,\n      onClickPodcast: this.openPodcast\n    }), __jsx(_JSXStyle, {\n      id: \"1889348503\"\n    }, [\"header.jsx-1980356252{color:#fff;background:#8756ca;padding:15px;font-size:1.5em;font-weight:bold;text-align:center;}\", \".channels.jsx-1980356252{display:grid;grid-gap:15px;padding:15px;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));}\", \".channel.jsx-1980356252{display:block;border-radius:3px;box-shadow:0px 2px 6px rgba(0,0,0,0.15);margin-bottom:0.5em;text-align:center;}\", \".channel.jsx-1980356252 img.jsx-1980356252{width:100%;}\", \"h1.jsx-1980356252{text-align:center;font-weight:600;padding:15px;color:whitesmoke;}\", \"h2.jsx-1980356252{padding:5px;font-size:0.9em;font-weigth:600;margin:0;color:whitesmoke;text-align:center;}\", \"h4.jsx-1980356252{color:black;}\", \".hero.jsx-1980356252{height:250px;width:100%;background-position:center;}\", \".modal.jsx-1980356252{position:fixed;top:0;right:0;bottom:0;left:0;background:#8756ca;z-index:9999;}\"]), __jsx(_JSXStyle, {\n      id: \"1566101122\"\n    }, [\"a{color:whitesmoke;-webkit-text-decoration:none;text-decoration:none;}\", \"li{list-style:none;color:whitesmoke;}\"])));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}